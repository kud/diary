(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"25od":function(e,n,t){"use strict";t.r(n),t.d(n,"meta",(function(){return s})),t.d(n,"default",(function(){return p}));var o=t("wx14"),r=t("Ff2n"),a=t("q1tI"),i=t.n(a),c=t("7ljp"),s=(i.a.createElement,{title:"How to include a file in your SSH config",description:"",cover:t("li1O"),coverPosition:10}),l={meta:s},u="wrapper";function p(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(c.b)(u,Object(o.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(c.b)("p",null,"Since the confinement (COVID-19 \ud83d\ude37), we all had in my company to work remotely. Even if it was a real experience as human being, technically we were already prepared as we have some colleagues who work full-time remotely."),Object(c.b)("p",null,"However, depending on your situation - if you're at work \ud83c\udfe2 or at home \ud83c\udfe1 - our configuration changes if you want to connect to some servers."),Object(c.b)("p",null,"This is where I'll talk about the SSH config file. As you may know, you can find all your ssh config in this file ",Object(c.b)("inlineCode",{parentName:"p"},"~/.ssh/config"),"."),Object(c.b)("p",null,"By default (I mean my own use), this is what I got:"),Object(c.b)("pre",null,Object(c.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),"# use keychain for SSH \u2014 https://ma.ttias.be/mac-osx-keeps-prompting-ssh-key-passphrase-not-use-keychain/\nHost *\n  UseKeychain yes\n  AddKeysToAgent yes\n\n# jumper\nHost *+*\n  ProxyCommand ssh $(echo %h | sed 's/+[^+]*$//;s/\\([^+%%]*\\)%%\\([^+]*\\)$/\\2 -l \\1/;s/:/ -p /') nc -w1 $(echo %h | sed 's/^.*+//;/:/!s/$/ %p/;s/:/ /')\n")),Object(c.b)("p",null,"The first block is a way to prevent to be asked every time you want to connect to a server your passphrase, using the Keychain."),Object(c.b)("p",null,"The second block is to ease the connection of a server via another server. A jumper so."),Object(c.b)("p",null,"Anyway. As I said, I've got a different configuration depending on my situation, I'm inside or outside my company building."),Object(c.b)("p",null,"For that, I found that since ",Object(c.b)("inlineCode",{parentName:"p"},"ssh 7.3p1")," (type ",Object(c.b)("inlineCode",{parentName:"p"},"ssh -V")," to know yours) , it's possible to use the keyword ",Object(c.b)("inlineCode",{parentName:"p"},"Include")," which allows you to include any file."),Object(c.b)("p",null,"From ",Object(c.b)("a",Object(o.a)({parentName:"p"},{href:"https://man7.org/linux/man-pages/man5/ssh_config.5.html"}),"the doc"),":"),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},Object(c.b)("strong",{parentName:"p"},"Include")),Object(c.b)("p",{parentName:"blockquote"},"Include the specified configuration file(s). Multiple path\u2010\nnames may be specified and each pathname may contain glob(7)\nwildcards and, for user configurations, shell-like \u2018~\u2019 refer\u2010\nences to user home directories. Files without absolute paths\nare assumed to be in ~/.ssh if included in a user configuration\nfile or /etc/ssh if included from the system configuration\nfile. Include directive may appear inside a Match or Host\nblock to perform conditional inclusion.")),Object(c.b)("p",null,"For security reason, I won't display what I've got in those files for sure, but this is what I've got now. I created two files in ",Object(c.b)("inlineCode",{parentName:"p"},"~/.ssh/config.d/work/")," called ",Object(c.b)("inlineCode",{parentName:"p"},"inside")," and ",Object(c.b)("inlineCode",{parentName:"p"},"outside")," and I (un)comment the include depending on where I am."),Object(c.b)("pre",null,Object(c.b)("code",Object(o.a)({parentName:"pre"},{className:"language-bash"}),"# work\n# Include config.d/work/inside\nInclude config.d/work/outside\n\n# use keychain for SSH \u2014 https://ma.ttias.be/mac-osx-keeps-prompting-ssh-key-passphrase-not-use-keychain/\nHost *\n  UseKeychain yes\n  AddKeysToAgent yes\n\n# jumper\nHost *+*\n  ProxyCommand ssh $(echo %h | sed 's/+[^+]*$//;s/\\([^+%%]*\\)%%\\([^+]*\\)$/\\2 -l \\1/;s/:/ -p /') nc -w1 $(echo %h | sed 's/^.*+//;/:/!s/$/ %p/;s/:/ /')\n")),Object(c.b)("p",null,"Taaaaaaadaaa \ud83c\udf89."),Object(c.b)("p",null,"The next step could be to make a script which switches those lines automatically but for the moment I'm happy with it."),Object(c.b)("p",null,"A little tips before leaving, you can include a whole folder by doing ",Object(c.b)("inlineCode",{parentName:"p"},"Include config.d/*"),"."),Object(c.b)("hr",null),Object(c.b)("p",null,"Source: ",Object(c.b)("a",Object(o.a)({parentName:"p"},{href:"https://superuser.com/questions/247564/is-there-a-way-for-one-ssh-config-file-to-include-another-one"}),"https://superuser.com/questions/247564/is-there-a-way-for-one-ssh-config-file-to-include-another-one")))}p.isMDXComponent=!0},"7ljp":function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return h}));var o=t("q1tI"),r=t.n(o);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=r.a.createContext({}),u=function(e){var n=r.a.useContext(l),t=n;return e&&(t="function"===typeof e?e(n):c({},n,{},e)),t},p=function(e){var n=u(e.components);return(r.a.createElement(l.Provider,{value:n},e.children))},b="mdxType",f={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},d=Object(o.forwardRef)((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=u(t),b=o,d=p["".concat(i,".").concat(b)]||p[b]||f[b]||a;return t?r.a.createElement(d,c({ref:n},l,{components:t})):r.a.createElement(d,c({ref:n},l))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"===typeof e||o){var a=t.length,i=new Array(a);i[0]=d;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c[b]="string"===typeof e?e:o,i[1]=c;for(var l=2;l<a;l++)i[l]=t[l];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},Ff2n:function(e,n,t){"use strict";function o(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}t.d(n,"a",(function(){return o}))},Kuaz:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/en/posts/2020/06/08/how-to-include-a-file-in-your-ssh-config",function(){return t("25od")}])},Qetd:function(e,n,t){"use strict";var o=Object.assign.bind(Object);e.exports=o,e.exports.default=e.exports},li1O:function(e,n){e.exports="/_next/static/images/cover-4677517735aa7726d0598d555c2343d1.jpg"},wx14:function(e,n,t){"use strict";function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}t.d(n,"a",(function(){return o}))}},[["Kuaz",0,1]]]);