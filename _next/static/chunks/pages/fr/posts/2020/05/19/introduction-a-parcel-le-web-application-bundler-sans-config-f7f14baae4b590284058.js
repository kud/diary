_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[41],{"3Aiv":function(e,t){e.exports="/_next/static/images/parcel-running-2ce4335b8598b919202a21347db8401c.gif"},"3toc":function(e,t){e.exports="/_next/static/images/demo-91ee81bbb0f671bef8968e8195b62992.png"},"7ljp":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n("q1tI"),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),u=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"===typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=u(n),m=r,d=p["".concat(s,".").concat(m)]||p[m]||b[m]||o;return n?a.a.createElement(d,i(i({ref:t},l),{},{components:n})):a.a.createElement(d,i({ref:t},l))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"===typeof e||r){var o=n.length,s=new Array(o);s[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"===typeof e?e:r,s[1]=i;for(var l=2;l<o;l++)s[l]=n[l];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},Ff2n:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}n.d(t,"a",(function(){return r}))},aIgJ:function(e,t,n){"use strict";n.r(t),n.d(t,"meta",(function(){return m})),n.d(t,"default",(function(){return f}));var r=n("rePB"),a=n("Ff2n"),o=(n("q1tI"),n("7ljp")),s=(n("pVnL"),n("CTjV"),n("DZdY")),i=(n("eVQB"),n("Exhd"),s.a.bind());["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){i[e]=i(e)}));var c=i;const l=c.div`
  display: flex;
  flex-wrap: wrap;
  justify-content: space-evenly;
  margin: 3rem 0;
`,u=c.div`
  width: 333px;
  padding: 0 20px;
  margin-bottom: 10px;
`;function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={title:"Introduction \xe0 Parcel, le Web Application Bundler zero config",description:"Mais vraiment.",cover:n("odZx"),coverPosition:40},d={meta:m};function f(e){var t=e.components,r=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",b(b(b({},d),r),{},{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Bonjour et bienvenu\xb7e aujourd'hui pour une petite introduction \xe0 ",Object(o.b)("a",b({parentName:"p"},{href:"https://parceljs.org/"}),"Parcel"),", ce bundler (pensez ",Object(o.b)("a",b({parentName:"p"},{href:"https://gulpjs.com/"}),"gulp"),", ",Object(o.b)("a",b({parentName:"p"},{href:"https://webpack.js.org/!"}),"webpack"),") qui arrive avec une promesse - pas des moindres - d'\xeatre super rapide \u26a1, et ce sans aucune configuration \xe0 d\xe9finir \ud83d\ude4c\ud83c\udffb. Plut\xf4t s\xe9duisant dit comme \xe7a. C'est ce que nous allons voir."),Object(o.b)("h2",null,"Pourquoi avons-nous besoin d'un bundler ?"),Object(o.b)("p",null,"C'est la premi\xe8re question qu'on doit se poser, pourquoi avons-nous besoin de cela\xa0?"),Object(o.b)("p",null,"Il y a plusieurs raisons \xe0 avoir envie d'un bundler, et les voici\xa0:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"vous voulez optimiser vos images ;"),Object(o.b)("li",{parentName:"ul"},"vous voulez minifier vos fichiers css, html, js ;"),Object(o.b)("li",{parentName:"ul"},"vous voulez r\xe9duire le nombre de requ\xeates http en fusionnant plusieurs fichiers de m\xeame type ensemble ;"),Object(o.b)("li",{parentName:"ul"},"vous voulez s\xe9parer votre code afin d'en faire des modules mais joindre tout \xe7a \xe0 la fin ;"),Object(o.b)("li",{parentName:"ul"},"vous voulez enfin \xe9crire dans une version avanc\xe9e de ECMAScript (comme ES6 ou ES7) mais que cela soit compris par tous les navigateurs \xe0 la fin.")),Object(o.b)("p",null,"Voil\xe0 les principales diff\xe9rentes raisons de pourquoi on aimerait un bundler. On souhaite aussi que celui-ci ",Object(o.b)("em",{parentName:"p"},"watch")," vos fichiers afin de recompiler \xe0 chaque changement de ceux-ci."),Object(o.b)("h2",null,"Parlons maintenant des bundlers du march\xe9"),Object(o.b)("p",null,"Je ne connais pas votre parcours, mais dans mon cas, je suis pass\xe9 par pas mal d'\xe9tapes. Ca a \xe9t\xe9 de g\xe9rer les ",Object(o.b)("em",{parentName:"p"},"assets")," \xe0 travers ",Object(o.b)("a",b({parentName:"p"},{href:"https://www.djangoproject.com/"}),"Django"),", ",Object(o.b)("a",b({parentName:"p"},{href:"https://rubyonrails.org/"}),"Ruby on Rails"),", ",Object(o.b)("a",b({parentName:"p"},{href:"https://symfony.com/"}),"Symfony")," c\xf4t\xe9 back. C\xf4t\xe9 front, \xe0 utiliser d'abord ",Object(o.b)("a",b({parentName:"p"},{href:"https://gruntjs.com/"}),"grunt")," puis gulp puis webpack, en passant par quelques scripts shell. Et m\xeame si \xe7'a \xe9t\xe9 efficace et ca l'est toujours, je crois que le plus traumatisant pour moi a \xe9t\xe9 de maintenir mon bundler sur gulp avec ",Object(o.b)("a",b({parentName:"p"},{href:"http://browserify.org/"}),"browserify"),". Chacun avait son propre syst\xe8me de stream et pour m\xe9langer tout \xe7a, ",Object(o.b)("em",{parentName:"p"},"poh poh poh"),", c'\xe9tait coton\n.\nHeureusement est arriv\xe9 par la suite ",Object(o.b)("a",b({parentName:"p"},{href:"https://babeljs.io/"}),"babel"),", mais j'avais rapidement birfuqu\xe9 \xe0 ce moment l\xe0 sur webpack, donc l'exp\xe9rience gulp + babel n'a jamais \xe9t\xe9 vraiment un sujet pour le moment chez moi."),Object(o.b)("p",null,"C\xf4t\xe9 webpack, rien \xe0 dire, c'est assez d\xe9claratif certes, faut conna\xeetre un peu les regex, j'ai eu aussi une certaine douleur lorsqu'il y avait des changements d'API majeurs mais dans l'ensemble j'en suis plut\xf4t content, et je n'arrive pas \xe0 vouloir utiliser ",Object(o.b)("a",b({parentName:"p"},{href:"https://reactjs.org/docs/create-a-new-react-app.html"}),"create-react-app")," (appel\xe9 CRA dans la suite du texte) tellement je suis bien \xe0 configurer webpack aux petits oignons \ud83e\uddc5. Alors, certes quand je dois ",Object(o.b)("em",{parentName:"p"},"shipper")," un produit assez rapidement ou faire un ",Object(o.b)("em",{parentName:"p"},"PoC")," (proof-of-concept), je vous avoue que je pourrais utiliser CRA. Mais c'est justement ce qui me fait venir \xe0 parler de Parcel justement !"),Object(o.b)("p",null,"L'id\xe9e de Parcel est de ne pas vous pr\xe9occuper de votre bundler, et de simplement coder directement votre application sans avoir \xe0 d\xe9finir chaque t\xe2che pour chaque type de fichiers. Plut\xf4t pratique. Alors oui, webpack a fait d'\xe9norme effort (surtout depuis la version 4) pour \xeatre ",Object(o.b)("em",{parentName:"p"},"zero config")," \xe0 travers ces modes ",Object(o.b)("inlineCode",{parentName:"p"},"development")," et ",Object(o.b)("inlineCode",{parentName:"p"},"production")," mais je n'ai pas test\xe9 ce cas."),Object(o.b)("h2",null,"Introduction \xe0 Parcel"),Object(o.b)("img",{src:n("m9Yz")}),Object(o.b)("p",null,"Premi\xe8rement le site est super propre, on comprend direct \xe0 quoi on a affaire. Voici les points principaux :"),Object(o.b)(l,{mdxType:"Container"},Object(o.b)(u,{mdxType:"Item"},Object(o.b)("strong",null,"\ud83d\ude80 Des temps d'empaquetage ultra-rapide"),Object(o.b)("p",null,"Parcel utilise des processus de travail en parall\xe8le pour permettre la compilation multic\u0153ur et dispose d'un cache de syst\xe8me de fichiers pour des reconstructions rapides m\xeame apr\xe8s un red\xe9marrage.")),Object(o.b)(u,{mdxType:"Item"},Object(o.b)("strong",null,"\ud83d\udce6 Empaquetez toutes vos ressources"),Object(o.b)("p",null,"Parcel a un support pr\xeat \xe0 l'emploi pour les fichiers ressources JS, CSS, HTML, etc - pas de plugins n\xe9cessaires.")),Object(o.b)(u,{mdxType:"Item"},Object(o.b)("strong",null,"\ud83d\udc20 Transformations automatiques"),Object(o.b)("p",null,"En cas de besoin, le code est automatiquement transform\xe9 en utilisant Babel, PostCSS et PostHTML - m\xeames les `node_modules`.")),Object(o.b)(u,{mdxType:"Item"},Object(o.b)("strong",null,"\u2702\ufe0f D\xe9coupage du code sans aucune configuration"),Object(o.b)("p",null,"En utilisant la syntaxe dynamique `import()`, Parcel d\xe9coupe la g\xe9n\xe9ration de vos paquets, cela permet de r\xe9cup\xe9rer seulement ce qui est n\xe9cessaire au chargement initial.")),Object(o.b)(u,{mdxType:"Item"},Object(o.b)("strong",null,"\ud83d\udd25 Remplacement de module \xe0 chaud"),Object(o.b)("p",null,"Parcel met \xe0 jour automatiquement les modules dans le navigateur lorsque vous apportez des modifications au cours du d\xe9veloppement, aucune configuration n'est n\xe9cessaire.")),Object(o.b)(u,{mdxType:"Item"},Object(o.b)("strong",null,"\ud83d\udea8 Journalisateur* convivial"),Object(o.b)("p",null,"Parcel affiche des extraits de code avec coloration syntaxique lorsqu'il rencontre des erreurs pour vous aider \xe0 identifier le probl\xe8me."),Object(o.b)("p",null,"* comprendre ",Object(o.b)("em",null,"Logger")))),Object(o.b)("h2",null,"Installons Parcel"),Object(o.b)("p",null,"Vous pouvez installer parcel soit globalement, soit localement, avec ",Object(o.b)("a",b({parentName:"p"},{href:"https://yarnpkg.com/"}),"yarn")," ou ",Object(o.b)("a",b({parentName:"p"},{href:"https://www.npmjs.com/"}),"npm"),", avec comme nom de projet ",Object(o.b)("inlineCode",{parentName:"p"},"parcel-bundler"),". Nous l'installerons ici localement."),Object(o.b)("pre",null,Object(o.b)("code",b({parentName:"pre"},{className:"language-shell"}),"$ npm install parcel-bundler --save-dev\n")),Object(o.b)("h2",null,"Cr\xe9ons notre premier projet avec Parcel"),Object(o.b)("p",null,"Commen\xe7ons simplement en cr\xe9ant une page html basique avec un fichier JavaScript inclus."),Object(o.b)("pre",null,Object(o.b)("code",b({parentName:"pre"},{className:"language-html"}),'\x3c!-- index.html --\x3e\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>Parcel Demo</title>\n  </head>\n\n  <body>\n    <p>Parcel Demo</p>\n\n    <script src="./index.js"><\/script>\n  </body>\n</html>\n')),Object(o.b)("pre",null,Object(o.b)("code",b({parentName:"pre"},{className:"language-js"}),'// index.js\nconsole.log("Parcel demo \ud83d\ude4c\ud83c\udffb")\n')),Object(o.b)("p",null,"Maintenant, lan\xe7ons le mode par d\xe9faut de parcel (watch + server):"),Object(o.b)("pre",null,Object(o.b)("code",b({parentName:"pre"},{className:"language-shell"}),"$ npx parcel index.html\n")),Object(o.b)("p",null,"Un serveur http se lance :"),Object(o.b)("img",{src:n("3Aiv"),style:{width:"50%"}}),Object(o.b)("p",null,"que nous pouvons visiter \xe0 travers l'url ",Object(o.b)("a",b({parentName:"p"},{href:"http://localhost:1234/"}),"http://localhost:1234/")," afin de voir notre superbe site. \ud83d\ude4c\ud83c\udffb"),Object(o.b)("img",{src:n("3toc")}),Object(o.b)("p",null,"Tadaaaaaaaaa \ud83d\udc6f\u200d\u2640\ufe0f"),Object(o.b)("p",null,"Maintenant, si en revanche vous ne voulez que ",Object(o.b)("em",{parentName:"p"},"watcher")," vos fichiers, Parcel vous propose une commande directe qui ne lancera pas de serveur :"),Object(o.b)("pre",null,Object(o.b)("code",b({parentName:"pre"},{className:"language-shell"}),"$ npx parcel watch index.html\n")),Object(o.b)("p",null,"Enfin, afin de livrer \xe7a en production, une simple commande suffit :"),Object(o.b)("pre",null,Object(o.b)("code",b({parentName:"pre"},{className:"language-shell"}),"$ npx parcel build index.html\n\n\u2728  Built in 879ms.\n\ndist/parcel.5f6f196c.js        1.15 KB     78ms\ndist/parcel.5f6f196c.js.map      200 B      2ms\ndist/index.html                  144 B    750ms\n")),Object(o.b)("h3",null,"Arborescence"),Object(o.b)("p",null,"Si on regarde de plus pr\xe8s ce qui a \xe9t\xe9 construit, on peut voir ceci :"),Object(o.b)("pre",null,Object(o.b)("code",b({parentName:"pre"},{}),".\n\u251c\u2500\u2500 dist\n\u2502\xa0\xa0 \u251c\u2500\u2500 index.html\n\u2502\xa0\xa0 \u251c\u2500\u2500 parcel.5f6f196c.js\n\u2502\xa0\xa0 \u2514\u2500\u2500 parcel.5f6f196c.js.map // sourcemaps\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 index.js\n\u2514\u2500\u2500 package-lock.json\n")),Object(o.b)("p",null,"Nous avons bien nos fichiers sources, et dans le dossier ",Object(o.b)("inlineCode",{parentName:"p"},"/dist"),", les fichiers compil\xe9s sont pr\xe9sents avec notre ",Object(o.b)("inlineCode",{parentName:"p"},"index.html")," minifi\xe9, et notre fichier JavaScript minifi\xe9 ainsi que ",Object(o.b)("em",{parentName:"p"},"cache bust\xe9")," (le ",Object(o.b)("em",{parentName:"p"},"cache busting")," est une technique d'invalidation de caches en modifiant le nom des fichiers afin qu'ils soient reconnus comme tout autre et donc t\xe9l\xe9charg\xe9s \xe0 nouveau)."),Object(o.b)("hr",null),Object(o.b)("p",null,"C\xf4t\xe9 CSS, vous pouvez tout aussi bien l'ins\xe9rer soit en l'incluant dans le fichier HTML, soit en l'important dans votre fichier JavaScript."),Object(o.b)("pre",null,Object(o.b)("code",b({parentName:"pre"},{className:"language-html"}),'\x3c!-- index.html --\x3e\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>Parcel Demo</title>\n    <link rel="stylesheet" type="text/css" href="./index.css" />\n  </head>\n\n  <body>\n    <p>Parcel Demo</p>\n\n    <script src="./index.js"><\/script>\n  </body>\n</html>\n')),Object(o.b)("p",null,"ou"),Object(o.b)("pre",null,Object(o.b)("code",b({parentName:"pre"},{className:"language-js"}),'// index.js\n\nimport "./index.css"\n\nconsole.log("Parcel demo \ud83d\ude4c\ud83c\udffb")\n')),Object(o.b)("p",null,"On a bien tout ce qu'il nous faut pour d\xe9buter notre projet."),Object(o.b)("h2",null,"Enfin, quelques notes"),Object(o.b)("p",null,"Notez que Parcel supporte les ",Object(o.b)("a",b({parentName:"p"},{href:"https://fr.parceljs.org/module_resolution.html"}),"aliases"),", int\xe8gre Babel dans sa compilation donc possibilit\xe9 de le configurer via ",Object(o.b)("inlineCode",{parentName:"p"},".babelrc"),". Et si vous avez des SVG inlines dans votre HTML et que vous avez des probl\xe8mes en sortie une fois compress\xe9s, c'est peut-\xeatre d\xfb \xe0 ",Object(o.b)("a",b({parentName:"p"},{href:"https://github.com/posthtml/htmlnano"}),"htmlnano"),". De ce fait, je vous recommande de d\xe9sactiver l'optimisation des SVG \xe0 travers ceci :"),Object(o.b)("pre",null,Object(o.b)("code",b({parentName:"pre"},{className:"language-js"}),"// .htmlnanorc.js\nmodule.exports = {\n  minifySvg: false,\n}\n")),Object(o.b)("h2",null,"Conclusion \ud83d\udce6"),Object(o.b)("p",null,"Je suis plut\xf4t impressionn\xe9 par ce projet qui est vraiment cl\xe9 en main pour le coup. Il est devenu pour de nombreux PoC ou petits projets mon bundler par d\xe9faut. \xc0 voir si un jour je remplace Webpack sur de gros projets par Parcel. En tout cas, il m'a fait oublier CRA pour le moment, et me fait gagner un temps fou quand je d\xe9bute un projet."),Object(o.b)("p",null,"J'esp\xe8re que vous avez appr\xe9ci\xe9 cette pr\xe9sentation et que cela vous a donn\xe9 envie d'essayer Parcel. \xc0\xa0bient\xf4t\xa0!\xa0\ud83d\udc4b\ud83c\udffb"))}f.isMDXComponent=!0},m9Yz:function(e,t){e.exports="/_next/static/images/parcel-site-af7e53fab01cf50c68bbd063efeedd7f.png"},odZx:function(e,t){e.exports="/_next/static/images/cover-e287ae26f1978d2eedb3d25db1ce5601.jpg"},pVnL:function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},rePB:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},wK4O:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fr/posts/2020/05/19/introduction-a-parcel-le-web-application-bundler-sans-config",function(){return n("aIgJ")}])}},[["wK4O",0,1,2]]]);